https://www.youtube.com/watch?v=KeTliAdTZTQ
Renovatebot
Привет, друзья! Сегодня у меня есть для вас очень интересный инструмент под названием Renovate.
Случалось ли с вами, что с течением времени в ваших репозиториях на GitHub, Bitbucket или где-то бы ни было, зависимости постоянно обновляются, пока вы погружены в проект, либо во время технического обслуживания?
Проходит год-два, и вы уже работаете над другим проектом. Этот репозиторий остается там. И зависимости не обновляются. И там внезапно появляются исправления безопасности или обновления. Вы теряетесь, потому что у вас есть эти правильные исправления.
Случалось ли с вами также, что иногда обнаруживается, что область безопасности или этического взлома внутри компании, или третьей стороны, если компания платит за это? У вас есть устаревшее программное обеспечение? Вы пользуетесь библиотеками, в которых есть уязвимости, потому что никто не приступал к обновлению в течение нескольких месяцев или нет? Никто больше не смотрит за проектом? В конце концов, там может что-то произойти.
Я подумал, что этот инструмент очень хорош. И я сказал, что вам стоит с ним познакомиться. Познакомьтесь с ним, чтобы вы сами обновляли свои репозитории.
У меня есть статья, которую я написал в своем блоге, где вы можете узнать об этом обновлении. Я инженер-программист. И я расскажу о всех преимуществах, которые дает нам этот инструмент. Этот инструмент является бесплатным. Он не только для Java-проектов. Он подойдет для проектов на многих языках, для многих технологий, даже с тем же исходным кодом Renovate. И это сделано с помощью … скрипта, который мы сейчас разрабатываем в мире фронтенда, чтобы сделать его угловым. И все модерны java script frameworks. Тогда я нашел его очень интересным даже для проектов Go.
Когда вы хотите работать с таким инструментом, вам нужно зайти в свою учетную  запись, чтобы уметь возможность установить его. Вам нужно найти Renovate. Я вам покажу, как это делается, чтобы вы могли сделать это вместе со мной, и могли воспользоваться этим замечательным инструментом.
На моей работе меня попросили более тщательно посмотреть, как использовать этот инструмент. Я вам покажу исходный код. Я собираюсь перейти на ту же страницу GitHub, потому что там есть сайт.
Он сообщает вам об автоматических обновлениях зависимостей. Зачем использовать Renovate? В этом все дело, потому что вы собираетесь получать автоматические pull request для  обновления ваших зависимостей. Это похоже на то, как если бы вы наняли разработчика на несколько часов, чтобы он посмотрел все ваши репозитории и сказал вам, что он отправляет вам pull request, потому что он обнаружил там исправления безопасности.
И так у вас всегда теперь есть обновленный репозиторий. Вы даже это можете запрограммировать. Вы можете делать это по выходным, в нерабочее время. Каждую неделю, каждый месяц – это частота, которую определяете вы. Вы можете это запланировать.
Хорошо, что самые важные пакеты будут обнаружены. И он отправит запрос на перенос. Но есть ли опция автоматического слияния? Об этом мы поговорим позже.
Вы можете работать с GitHub, вы можете работать с GitLab, с Bitbucket и т. д. Его используют крупные компании. Дело не в том, что это какой-то проект, запущенный GitHub. Им пользуются крупные компании.
Все вы можете извлечь выгоду из автоматизации. Вы можете адаптировать это к своему рабочему процессу. Вы настраиваете его в соответствии с вашими потребностями параметры автоматического определения, которые возможны.
Для Renovate есть учебное пособие.
Установите приложение Renovate сейчас.
Я дам вам небольшой пример json, потому что он настроен с помощью json.
Я уже установил его. Вот почему у меня не получается его настроить. Когда я пытаюсь его настроить, он спрашивает меня, в какой репозиторий я хочу его установить. Я собираюсь сделать это в Jose Diaz, потому что другие репозитории касаются моей работы.
Небольшое количество гроссмейстеров, которые войдут в мою учетную  запись. Это очень интересная защита, позволяющая мне избежать каких-либо проблем.
Как вы видите, я быстро установил. Это быстрая установка на вашу ракету GitHub. Мне ничего не пришлось платить. У меня все готово. Единственное, мне нужно сказать – хочу ли я, чтобы это было для всех моих репозиторий или для одного репозитория.
Я выбрал один. Сегодня я добавлю еще один. Но вы можете применить его для всех своих репозиторий.
Я обновил. Он был изменен для учетной записи. Я его уже установил. У меня все готово. Я пойду в свои репозитории. Я ухожу в свои хранилища.
Сначала я вам покажу тот, который только что был добавлен, т. е. он новенький-новенький. Как вы уже видите, есть запрос на перенос, т. е. ничего не было отложено. Он говорит, что отправил мне запрос на посадку – добро пожаловать.
Он говорит вам, что хочет выполнить слияние commits с Мастером из этой ветки. Она создала свою ветку. Она программист-робот. Добро пожаловать в Renovate. Он поможет вам понять и настроить параметры, прежде чем вы начнете выполнять свои последующие pull requests, которые будут поступать.
Я обновился, и он ничего не будет делать, пока вы не выполните merge с этого pull requests, если вы хотите отключить обновление. Вы просто закрываете запрос на перенос, и ничего не происходит. Запрос на перенос не срабатывал, значит, он обнаружил, что я использую maven. Я использую этот пакет json. Значит, он уже обнаружил технологии, которые есть в вашем проекте. И он говорит с вами о кратком изложении того, что он собирается делать.
Он собирается обновить зависимость. Он собирается включить панель инструментов, чтобы вы могли увидеть, как прошел процесс обновления. Он собирается игнорировать некоторые каталоги, которые не следует принимать во внимание, но он также накладывает на вас некоторые ограничения, потому что это бесплатно. У вас есть бесплатный план. Очевидно, что есть и план, который вы можете запросить у компании, им владеющей.
Мы его видим, и он ограничивает нас в pull запросах. В любом случае, есть некоторые вещи, которые он только что заметил. Он уже говорит мне, что теперь эту работу можно выполнить. Тогда я собираюсь сделать слияние по запросу. Подтвердить. И в этот момент я уже активирую это. И появится обновленный файл.
Json, как вы можете видеть, уже имеет эту структуру. Я собираюсь немного расширить его, чтобы вы, ребята, могли видеть его без проблем. У вас уже есть структура. Вы уже вызываете базовую конфигурацию и там уже что-то делаете. И он собирается выполнять свою  работу в выходные или нерабочее время. Все это отключено, пока вы не решите.
Json сообщает вам, какова структура элементов для настройки renovate.json. И это может сработать для вас.
Но поскольку они выглядят так, как есть, это очень хорошо. Потому что уже сейчас до меня скоро дойдет pull request, в котором рассказывается, что я мог бы сделать.
Я уже обновил этот проект, чтобы он не устарел. И мне кажется, что это очень круто, потому что это случилось со мной. Мы подождем – быстро ли поступит запрос на перенос.
Один уже прибыл. Приехало уже два запроса.
Вы поняли, что мой проект устарел. Я специально выбрал его, потому что он мне подходит, чтобы вы могли это увидеть. Зависимости немного старые. Я должен подтвердить.
Он прислал мне сообщение, в котором говорит, что у вас есть зависимости. И мы уже работаем над версией 15.7.0. …  Он уже говорит, что это зависимости. Но по умолчанию все эти настройки отключены.
Если вы хотите заниматься программированием, то merge и многие другие версии в документации подскажут вам, как это включить.
И тогда я попрошу его применить эти зависимости. Потом приходит еще один запрос на перенос, потому что он понимает, что я использую axios. Тогда он говорит мне, что здесь тоже есть уязвимость. Он говорит, что обнаружена уязвимость и дает рекомендацию перейти на другую версию.
Сейчас я только что столкнулся с конфликтом. Должно быть, он является его стороной, потому что я уже принял другой запрос на перенос. Мне нужно немного подождать. Но он уже предупреждает меня, что есть проблемы безопасности. Так что это дорого стоит, потому что уже есть кто-то, кто помогает вам разрешать эти конфликты.
Я собираюсь перейти к другому проекту, в котором также есть Renovate. Это проект AngularSamples.
У меня есть куча проектов Angular, так что у меня уже есть несколько pull запросов, которые были сделаны.
Если вам покажется, что это будет объемно, вы можете запланировать это на выходные. Вы можете сделать это в нерабочее время.
Даже у нас слишком много репозиторий, мы можем иметь централизованную конфигурацию для всех, чтобы вы больше не находились в одном и том же обновленном и копирующим, и вставляющим одни и те же настройки. Это послужит поводом для второй статьи, в которой я расскажу, как настроить его для многих репозиторий. И таким образом все они будут иметь одинаковую конфигурацию.
У репозиторий есть хотя бы одна базовая конфигурация. И если вам нужно что-то особенное, вы уже делаете это в конце года в репозитории, но делаете это по наследству.
Вы унаследовали централизованную конфигурацию. Это проект, который больше не находится в стадии бета-тестирования. Ему уже много лет. Вы переходите к исходному коду Renovate. Ему уже много лет. Я находил его с 2018-го года. Его используют многие компании.
В default.json вы можете указать еще немного настроек.
Я могу продолжать генерировать базовую конфигурацию. Но теперь я собираюсь рассказать, какие зависимости являются «minor», «patch» и «digest». Это номенклатура зависимости для каждой версии зависимости. Поэтому я действительно хочу, чтобы automerge был автоматический. Я тоже игнорирую тесты на случай, если у меня там что-то особенное. И только для определенных пакетов.
Даже если вы видите это как регулярное выражение, я говорю, что хочу, чтобы только эти пакеты автоматически обновлялись, не требуя от меня одобрения pull request. И это то, что я хотел вам предложить сегодня.
Он очень простой в использовании. Ваши зависимости будут обновлены. У вас будет отличный программист, работающий на вас автоматически, но который позволит вам сделать так, чтобы ваши проекты были всегда без изменения уязвимости, с исправлением безопасности. И у вас уже это есть.
Так что когда к вам придет этический хакер и зайдет в ваши репозитории, он найдет их все обновленными и исправленными, без каких-либо проблем. Или скажет: «Эй, ты пользуешься старой библиотекой. В этой библиотеке есть такие-то уязвимости». Вот и все. У него есть полный список.
Но благодаря Renovate у вас все будет в актуальном состоянии. На данный момент мы сосредоточились на обновлении зависимостей. Кроме того, у него есть поддержка Maven, Gradle Artifactory. И у него есть поддержка модулей Go. Он многоязычный. Я приглашаю вас попробовать его и выяснить, чем он может вам помочь.